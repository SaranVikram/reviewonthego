!function(t){"object"==typeof module&&"object"==typeof module.exports?module.exports=t(require("jquery"),window,document):t(jQuery,window,document)}(function(o,t,n,i){const e="primaryColor",r={skip:5,callback:null};function s(t,i){this.element=t,this.settings=o.extend({},r,this.configure(i)),this._defaults=r,this._name=e,this.primary={rgb:"",count:0},this.init()}o.extend(s.prototype,{init:function(){const t=new Image;t.crossOrigin="Anonymous",o(t).on("load",o.proxy(this.onLoad,this)).prop("src",this.element.src||"")},configure:function(t){return"function"==typeof t?{callback:t}:"object"!=typeof t&&t?{}:t},getImageData:function(t){const i=n.createElement("canvas"),e=i.getContext("2d");return i.width=t.width,i.height=t.height,e.drawImage(t,0,0),e.getImageData(0,0,t.width,t.height)},isApproximateColor:function(t,i){if(!t||!i)return!1;var t=t.split(","),i=i.split(","),e=t[0]-i[0],n=t[1]-i[1],t=t[2]-i[2];return Math.sqrt(e*e+n*n+t*t)<60},sortColors:function(e){return Object.keys(e).sort(function(t,i){return e[i]-e[t]})},onLoad:function(t){const e=this.getImageData(t.currentTarget).data,n=e.length/4,r={};for(let i=0;i<n;i+=4*this.settings.skip)if(!(e[i+3]<255)){let t=[e[i],e[i+1],e[i+2]].join(",");this.primary.rgb&&this.isApproximateColor(this.primary.rgb,t)&&(t=this.primary.rgb),r[t]=r[t]||0;const n=++r[t];n>this.primary.count&&(this.primary.rgb=t,this.primary.count=n)}o.data(this.element,"primary-color",this.primary.rgb),"function"==typeof this.settings.callback&&this.settings.callback.call(this.element,this.primary.rgb,this.sortColors(r).slice(0,5))}}),o.fn[e]=function(t){return this.each(function(){o.data(this,"plugin_"+e)||o.data(this,"plugin_"+e,new s(this,t))})}});